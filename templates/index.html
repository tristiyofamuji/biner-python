<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Tabel Biner — ASCII</title>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  <style>
    body { padding: 32px; }
    .char-cell { font-family: "Courier New", monospace; font-size: 20px; }

    pre {
      background: #f8f8f8;
      padding: 12px;
      border-radius: 6px;
      white-space: pre-wrap;
      font-size: 14px;
    }

    @media print {
        #non-print { display: none !important; }
        .print-section { page-break-inside: avoid !important; break-inside: avoid !important; margin-bottom: 40px; }
        h4 { page-break-before: always; }
        h4:first-of-type { page-break-before: auto !important; }
    }

    .formula-box {
        background: #f8f9fa;
        border-left: 4px solid #007bff;
        padding: 8px 12px;
        margin-top: 10px;
        font-size: 14px;
        font-family: Consolas, monospace;
    }

    .calc-detail {
        font-family: Consolas, monospace;
        font-size: 13px;
        white-space: pre-line;
        background: #f4f4f4;
        padding: 6px;
        border-radius: 4px;
        vertical-align: middle;
    }
  </style>
</head>

<body>
<div class="container">

  <h1 class="mb-4 text-center">
      Tabel Konversi Bilangan <br>
      <small>(ASCII - American Standard Code for Information Interchange)</small>
  </h1>

  <!-- Form & controls (non-print) -->
  <div id="non-print">

    <div class="card mb-4">
      <div class="card-body">
        <form method="post" id="conv-form" class="form-inline" onsubmit="return true;">
          <div class="form-group mr-2">
            <label for="input_text" class="sr-only">Teks</label>
            <input id="input_text" name="input_text" class="form-control"
                   placeholder="Masukkan teks untuk dikonversi"
                   value="{{ input_text }}">
          </div>

          <button type="submit" class="btn btn-primary mr-2">Konversi</button>

          <button type="button" class="btn btn-secondary" onclick="clearConversion()">
            Bersihkan
          </button>
        </form>

        {% if converted %}
        <div id="convert-section">
          <hr>
          <h5 class="mt-3">Hasil Konversi</h5>

          <div class="formula-box">
              <b>Rumus Umum:</b><br>
              Decimal → Binary : pembagian berulang ÷ 2<br>
              Decimal → Octal  : pembagian berulang ÷ 8<br>
              Decimal → Hex    : pembagian berulang ÷ 16<br>
              Octal → Decimal  : digit × 8ⁿ<br>
              Hex → Decimal    : digit × 16ⁿ
          </div>

          <table class="table table-sm table-bordered mt-3">
            <thead class="thead-light">
              <tr>
                <th>Karakter</th>
                <th>Decimal</th>
                <th>Binary</th>
                <th>Octal</th>
                <th>Hex</th>
                <th>Perhitungan Detail</th>
              </tr>
            </thead>
            <tbody>
              {% for e in converted %}
              <tr>
                <td class="char-cell">{{ e.char.replace(' ', '␣') }}</td>
                <td>{{ e.decimal }}</td>
                <td><code>{{ e.binary }}</code></td>
                <td>{{ e.octal }}</td>
                <td>{{ e.hex }}</td>
                <td class="calc-detail"><b>Decimal → Binary</b><pre>{{ e.calc_binary }}</pre><b>Decimal → Octal</b><pre>{{ e.calc_octal }}</pre><b>Decimal → Hex</b><pre>{{ e.calc_hex }}</pre><b>Octal → Decimal</b><pre>{{ e.calc_octal_to_dec }}</pre><b>Hex → Decimal</b><pre>{{ e.calc_hex_to_dec }}</pre></td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        {% endif %}
      </div>
    </div>

    <button class="btn btn-danger mb-4" onclick="printBinaryTable()">
      Cetak Tabel ASCII (PDF)
    </button>
  </div>


  <!-- ASCII TABLES (FOR PRINT) -->
  <div id="ascii-table-section">

    <!-- Uppercase A–M & N–Z -->
    <h4>Uppercase Alphabet</h4>
    <div class="row">
      <div class="col-md-6 print-section">
        <h5>A – M</h5>
        <div class="table-responsive">
          <table class="table table-sm table-striped table-bordered">
            <thead class="thead-dark">
              <tr><th>Char</th><th>Dec</th><th>Binary</th><th>Hex</th></tr>
            </thead>
            <tbody>
              {% for r in sections['Uppercase A–M'] %}
              <tr>
                <td class="char-cell">{{ r.char }}</td>
                <td>{{ r.decimal }}</td>
                <td><code>{{ r.binary }}</code></td>
                <td>{{ r.hex }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

      <div class="col-md-6 print-section">
        <h5>N – Z</h5>
        <div class="table-responsive">
          <table class="table table-sm table-striped table-bordered">
            <thead class="thead-dark">
              <tr><th>Char</th><th>Dec</th><th>Binary</th><th>Hex</th></tr>
            </thead>
            <tbody>
              {% for r in sections['Uppercase N–Z'] %}
              <tr>
                <td class="char-cell">{{ r.char }}</td>
                <td>{{ r.decimal }}</td>
                <td><code>{{ r.binary }}</code></td>
                <td>{{ r.hex }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Lowercase -->
    <h4 class="mt-5">Lowercase Alphabet</h4>
    <div class="row">
      <div class="col-md-6 print-section">
        <h5>a – m</h5>
        <div class="table-responsive">
          <table class="table table-sm table-striped table-bordered">
            <thead class="thead-dark">
              <tr><th>Char</th><th>Dec</th><th>Binary</th><th>Hex</th></tr>
            </thead>
            <tbody>
              {% for r in sections['Lowercase a–m'] %}
              <tr>
                <td class="char-cell">{{ r.char }}</td>
                <td>{{ r.decimal }}</td>
                <td><code>{{ r.binary }}</code></td>
                <td>{{ r.hex }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

      <div class="col-md-6 print-section">
        <h5>n – z</h5>
        <div class="table-responsive">
          <table class="table table-sm table-striped table-bordered">
            <thead class="thead-dark">
              <tr><th>Char</th><th>Dec</th><th>Binary</th><th>Hex</th></tr>
            </thead>
            <tbody>
              {% for r in sections['Lowercase n–z'] %}
              <tr>
                <td class="char-cell">{{ r.char }}</td>
                <td>{{ r.decimal }}</td>
                <td><code>{{ r.binary }}</code></td>
                <td>{{ r.hex }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Digits -->
    <h4 class="mt-5">Digits (0–9)</h4>
    <div class="print-section table-responsive">
      <table class="table table-sm table-striped table-bordered">
        <thead class="thead-dark">
          <tr><th>Char</th><th>Dec</th><th>Binary</th><th>Hex</th></tr>
        </thead>
        <tbody>
          {% for r in sections['Digits (0-9)'] %}
          <tr>
            <td class="char-cell">{{ r.char }}</td>
            <td>{{ r.decimal }}</td>
            <td><code>{{ r.binary }}</code></td>
            <td>{{ r.hex }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <!-- Symbols -->
    <h4 class="mt-5">Punctuation & Symbols</h4>
    <div class="print-section table-responsive">
      <table class="table table-sm table-striped table-bordered">
        <thead class="thead-dark">
          <tr><th>Char</th><th>Dec</th><th>Binary</th><th>Hex</th></tr>
        </thead>
        <tbody>
          {% for r in sections['Punctuation & Symbols'] %}
          <tr>
            <td class="char-cell">{{ r.char }}</td>
            <td>{{ r.decimal }}</td>
            <td><code>{{ r.binary }}</code></td>
            <td>{{ r.hex }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>

</div>

<script>
function printBinaryTable() {
    window.print();
}

function clearConversion() {
    const inp = document.getElementById('input_text');
    if (inp) inp.value = '';

    const conv = document.getElementById('convert-section');
    if (conv) conv.style.display = 'none';
}
</script>

</body>
</html>
